NULL EQU -1
SIZE_ES EQU 1024


HEAPINIT:
MOV [ES],ES
ADD [ES],4
RET


ALLOC:
PUSH BP
MOV BP,SP
PUSH EBX
MOV EBX,NULL
MOV EBX,w[es+2]
ADD EBX,[BP+8]
CMP EBX,SIZE_ES
JP ALLOC_END
MOV EAX,[ES]
ADD [ES],[BP+8]
ALLOC_END:
POP EBX
MOV SP,BP
POP BP
RET